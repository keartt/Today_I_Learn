<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.all.test.board.dao.IBDao">

<select id="listDao" resultType="com.all.test.board.dto.BoardDto">
	SELECT * FROM mybatis_board ORDER BY bGroup DESC, bStep ASC
</select>   

<insert id="writeDao">
	insert into mybatis_board (bName, bTitle, bContent, bDate, bHit, bGroup, bStep, bIndent) values (#{param3}, #{param1}, #{param2}, now(), 1, (select max(bid) from mybatis_board)+1, 0, 0)
</insert>

<delete id="deleteDao">delete from mybatis_board where bid = CAST(#{param1} AS INTEGER)</delete>
	
<select id="contentDao" resultType="com.all.test.board.dto.BoardDto">
	SELECT * FROM mybatis_board WHERE bid = CAST(#{param1} AS INTEGER)
</select> 

<update id="modifyDao">
    UPDATE mybatis_board SET bTitle = #{param1}, bContent = #{param2} WHERE bid = CAST(#{param3} AS INTEGER)
</update>

<update id="upHitDao">
    UPDATE mybatis_board SET bHit = bHit+1 WHERE bId = CAST(#{param1} AS INTEGER)
</update>



<select id="reply_view" resultType="com.all.test.board.dto.BoardDto">
	SELECT * FROM mybatis_board WHERE bid = CAST(#{param1} AS INTEGER)
</select> 

<insert id="replyDao">
	insert into mybatis_board (bName, bTitle, bContent, bGroup, bStep, bIndent) values (#{param2}, #{param3}, #{param4}, CAST(#{param5} AS INTEGER), CAST(#{param6} AS INTEGER)+1, CAST(#{param7} AS INTEGER)+1 )
</insert>
</mapper>


